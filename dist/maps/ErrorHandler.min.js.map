{"version":3,"file":"ErrorHandler.min.js","lineCount":6,"mappings":"A;;;;AAiCE,SAAS,CAACA,CAAD,CAASC,CAAT,CAAkB,CAEzB,IAAIC,EAAkBA,QAAS,EAAG,EACJ,WAA9B,GAAI,MAAOF,EAAAG,QAAX,GACID,CADJ,CACsBF,CAAAG,QADtB,CAIA,KAAIC,EAAI,CACJC,WAAY,uBADR,CAEJC,SAAUA,QAAS,EAAG,CAClBN,CAAAG,QAAA,CAAiBI,QAAS,EAAG,CACzB,IAAIC,EAAOC,KAAAC,UAAAC,MAAAC,KAAA,CAA2BC,SAA3B,CACXT,EAAAU,OAAAC,MAAA,CAAe,IAAf,CAAqBP,CAArB,CACAN,EAAAa,MAAA,CAAsB,IAAtB,CAA4BP,CAA5B,CAHyB,CAK7BJ,EAAAY,kBAAA,EANkB,CAFlB,CAUJA,kBAAmBA,QAAS,EAAG,CACE,UAA7B,GAAI,MAAOhB,EAAAiB,OAAX,EACIA,MAAA,CAAOjB,CAAAkB,SAAP,CAAAC,UAAA,CAAkC,QAAS,CAACC,CAAD,CAAIC,CAAJ,CAASC,CAAT,CAAmBC,CAAnB,CAA4B,CAOnEnB,CAAAoB,MAAA,CANYC,CACRF,QAA0B,CAAjB,CAAAA,CAAAG,OAAA,CAAqBH,CAArB,CAA+B,eADhCE,CAERE,OAAQL,CAAAM,KAFAH,CAGRI,IAAKP,CAAAO,IAHGJ,CAIRG,KAAM,WAJEH,CAMZ,CAPmE,CAAvE,CAFuB,CAV3B,CAuBJX,OAAQA,QAAS,CAACS,CAAD,CAAUO,CAAV,CAAoBC,CAApB,CAA4BC,CAA5B,CAAoC,CAQjD5B,CAAAoB,MAAA,CAPYC,CACRF,QAASA,CADDE;AAERK,SAAUA,CAFFL,CAGRM,OAAQA,CAHAN,CAIRO,OAAQA,CAJAP,CAKRG,KAAM,OALEH,CAOZ,CARiD,CAvBjD,CAiCJD,MAAOA,QAAS,CAACC,CAAD,CAAQ,CACpB,IAAIQ,EAAS7B,CAAA8B,IAAA,EACbD,EAAAE,KAAA,CAAYV,CAAZ,CACAxB,EAAAmC,QAAA,CAAgBhC,CAAAC,WAAhB,CAA8BgC,IAAAC,UAAA,CAAeL,CAAf,CAA9B,CAHoB,CAjCpB,CAsCJC,IAAKA,QAAS,EAAG,CACb,MAAI,KAAJ,GAAajC,CAAAsC,QAAA,CAAgBnC,CAAAC,WAAhB,CAAb,CACWgC,IAAAG,MAAA,CAAWvC,CAAAsC,QAAA,CAAgBnC,CAAAC,WAAhB,CAAX,CADX,CAGO,EAJM,CAtCb,CA4CJoC,MAAOA,QAAS,EAAG,CACfxC,CAAAmC,QAAA,CAAgBhC,CAAAC,WAAhB,CAA8B,IAA9B,CADe,CA5Cf,CAiDRL,EAAA0C,aAAA,CAAsBtC,CACtBA,EAAAE,SAAA,EAzDyB,CAA3B,CAAA,CA2DA,IA3DA,CA2DMqC,YA3DN;","sources":["ErrorHandler.js"],"names":["global","storage","originalOnError","onerror","E","storageKey","register","global.onerror","args","Array","prototype","slice","call","arguments","handle","apply","registerForjQuery","jQuery","document","ajaxError","e","xhr","settings","message","store","error","length","method","type","url","filename","lineno","column","errors","get","push","setItem","JSON","stringify","getItem","parse","clear","ErrorHandler","localStorage"],"sourceRoot":"src/","sourcesContent":["/**\n * Copyright 2015 Fabian Grutschus. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those\n * of the authors and should not be interpreted as representing official policies,\n * either expressed or implied, of the copyright holders.\n *\n * @author    Fabian Grutschus <f.grutschus@lubyte.de>\n * @copyright 2015 Fabian Grutschus. All rights reserved.\n * @license   BSD-2-Clause\n */\n\n;(function (global, storage) {\n\n    var originalOnError = function () {};\n    if (typeof global.onerror === \"function\") {\n        originalOnError = global.onerror;\n    }\n\n    var E = {\n        storageKey: \"fabiang_error_handler\",\n        register: function () {\n            global.onerror = function () {\n                var args = Array.prototype.slice.call(arguments);\n                E.handle.apply(null, args);\n                originalOnError.apply(null, args);\n            };\n            E.registerForjQuery();\n        },\n        registerForjQuery: function () {\n            if (typeof global.jQuery === \"function\") {\n                jQuery(global.document).ajaxError(function (e, xhr, settings, message) {\n                    var error = {\n                        message: message.length > 0 ? message : \"Unknown error\",\n                        method: settings.type,\n                        url: settings.url,\n                        type: \"ajaxError\"\n                    };\n                    E.store(error);\n                });\n            }\n        },\n        handle: function (message, filename, lineno, column) {\n            var error = {\n                message: message,\n                filename: filename,\n                lineno: lineno,\n                column: column,\n                type: \"error\"\n            };\n            E.store(error);\n        },\n        store: function (error) {\n            var errors = E.get();\n            errors.push(error);\n            storage.setItem(E.storageKey, JSON.stringify(errors));\n        },\n        get: function () {\n            if (null !== storage.getItem(E.storageKey)) {\n                return JSON.parse(storage.getItem(E.storageKey));\n            }\n            return [];\n        },\n        clear: function () {\n            storage.setItem(E.storageKey, \"[]\");\n        }\n    };\n\n    global.ErrorHandler = E;\n    E.register();\n\n}(this, localStorage));\n"]}